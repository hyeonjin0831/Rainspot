<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RainSpot ì‹¤ì‹œê°„ ì´ˆë‹¨ê¸° ì˜ˆì¸¡ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen p-6">
    <div id="app" class="max-w-xl mx-auto bg-white shadow-2xl rounded-2xl overflow-hidden font-sans">
        <header class="p-5 bg-blue-700 text-white">
            <h1 class="text-xl font-bold">ğŸŒ¦ï¸ RainSpot ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</h1>
            <p id="locationDisplay" class="text-sm mt-1">ğŸ“ ìœ„ì¹˜ ì¸ì‹ ì¤‘...</p>
        </header>

        <main class="p-6">
            <div id="loading" class="text-center text-gray-600">ê¸°ìƒ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

            <div id="result" class="hidden space-y-4">
                <div class="flex justify-between items-center">
                    <div>
                        <p id="weatherDesc" class="text-lg font-bold"></p>
                        <p id="temp" class="text-3xl font-extrabold"></p>
                    </div>
                    <span id="icon" class="text-5xl"></span>
                </div>

                <div class="p-4 rounded-lg bg-gray-100">
                    <p><strong>ğŸ’§ ìŠµë„:</strong> <span id="humidity"></span>%</p>
                    <p><strong>ğŸŒ¬ï¸ í’ì†:</strong> <span id="wind"></span> m/s</p>
                    <p><strong>ğŸ“‰ ê¸°ì••:</strong> <span id="pressure"></span> hPa</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        const API_KEY = "69d61d8ce6b10d218ad3ccb4105ca4d2";

        function fetchWeather(lat, lon) {
            const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=kr`;

            fetch(url)
                .then(res => res.json())
                .then(data => {
                    document.getElementById("loading").classList.add("hidden");
                    document.getElementById("result").classList.remove("hidden");

                    document.getElementById("locationDisplay").textContent = `ğŸ“ ${data.name}`;
                    document.getElementById("weatherDesc").textContent = data.weather[0].description;
                    document.getElementById("temp").textContent = `${data.main.temp.toFixed(1)}Â°C`;
                    document.getElementById("humidity").textContent = data.main.humidity;
                    document.getElementById("wind").textContent = data.wind.speed;
                    document.getElementById("pressure").textContent = data.main.pressure;

                    const iconCode = data.weather[0].icon;
                    document.getElementById("icon").innerHTML = `<img src="https://openweathermap.org/img/wn/${iconCode}@2x.png" alt="ë‚ ì”¨ ì•„ì´ì½˜">`;
                })
                .catch(err => {
                    document.getElementById("loading").textContent = "ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨ ğŸ˜¢";
                    console.error(err);
                });
        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    fetchWeather(lat, lon);
                },
                (err) => {
                    document.getElementById("loading").textContent = "ìœ„ì¹˜ ì¸ì‹ ì‹¤íŒ¨ ğŸ˜¢";
                    console.error(err);
                }
            );
        } else {
            document.getElementById("loading").textContent = "ë¸Œë¼ìš°ì €ê°€ ìœ„ì¹˜ ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ";
        }
    </script>
</body>
</html>
